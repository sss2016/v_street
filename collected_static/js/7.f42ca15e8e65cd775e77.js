webpackJsonp([7],{"4KkU":function(t,e){},"J/QH":function(t,e,a){"use strict";Boolean,String,String,String;var o={name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transition}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:t.text?"":"vux-loading-no-text"},[a("div",{staticClass:"weui-mask_transparent"}),t._v(" "),a("div",{staticClass:"weui-toast",style:{position:t.position}},[a("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),t.text?a("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2):t._e()])])])},staticRenderFns:[]};var s=a("C7Lr")(o,n,!1,function(t){a("4KkU")},null,null);e.a=s.exports},UdJP:function(t,e){},VLn8:function(t,e){},onLd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3cXf"),n=a.n(o),s=(a("L7Pj"),a("o+C2")),i=a("fvyU"),r=a("IXui"),l=a("CKVb"),u=a("gpPJ"),c=a("RAwi"),d=a("swb9"),p=a("J/QH"),g=a("Jp5S"),m=a("iVA8"),f=(g.a,l.a,u.a,d.a,m.default,c.a,s.a,i.a,r.a,p.a,{directives:{TransferDom:g.a},data:function(){return{show2:!1,date:"",title1:"类型",list1:[],value1:[],formData:{csrfmiddlewaretoken:"",type_id:null,goods_name:null,goods_price:null,dec:null,guige:null},hadSelImg:!1,uping:!1}},components:{Group:l.a,Cell:u.a,CellBox:d.a,upload:m.default,XTextarea:c.a,PopupPicker:s.a,XInput:i.a,XButton:r.a,Loading:p.a},mounted:function(){this.getTypes()},activated:function(){window.mycache.standards&&(this.formData.guige=window.mycache.standards),console.log(window.mycache.standards)},methods:{changes:function(t){console.log(t)},getTypes:function(){var t=this;this.$http.get("http://localhost:8000/getGoodsTypes").then(function(e){t.list1=[t.querySetToArray(e.data)],console.log(t.list1)},function(t){console.log("error")})},querySetToArray:function(t){for(var e=[],a=0;a<t.length;a++)e.push({value:t[a].pk,name:t[a].fields.name});return e},submit_goods:function(){if(this.hadSelImg)if(null==this.formData.goods_name||this.formData.goods_name.replace(""," ").length<1)alert("请输入商品名称");else if(null==this.formData.goods_price||this.formData.goods_price.replace(""," ").length<1)alert("请输入商品价格");else if(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/.test(this.formData.goods_price))if(null==this.formData.dec&&this.formData.dec.replace(""," ").length<1)alert("请输入商品描述");else{this.formData.type_id=this.value1[0];var t=this.obj_copy(this.formData);t.guige=n()(t.guige),this.uping=!0,this.$refs.upload.uploadImg(null,t)}else alert("价格格式不正确");else alert("请上传一张商品图片")},wancheng:function(){this.uping=!1,this.$router.push({name:"goods"})},obj_copy:function(t){var e={};for(var a in t)e[a]=t[a];return e}}}),h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("upload",{ref:"upload",attrs:{path:"../../assets/ic_empty_event.png",isAutoUpload:!1,uploadUrl:"addGoods"},on:{success:t.wancheng,imageChange:function(e){t.hadSelImg=!0}}}),t._v(" "),a("group",{staticClass:"myform"},[a("x-input",{attrs:{title:"名称",name:"username",placeholder:"请输入商品名称"},model:{value:t.formData.goods_name,callback:function(e){t.$set(t.formData,"goods_name",e)},expression:"formData.goods_name"}}),t._v(" "),a("x-input",{attrs:{title:"价格",name:"username",placeholder:"请输入商品价格"},model:{value:t.formData.goods_price,callback:function(e){t.$set(t.formData,"goods_price",e)},expression:"formData.goods_price"}}),t._v(" "),a("cell",{attrs:{title:"规格","is-link":"",link:{name:"standards",params:{type:0,goods_id:null,treeData:t.formData.guige}}}},[t._v("\n        已设置\n      "+t._s(t.formData.guige?Object.keys(t.formData.guige).length:"0")+"\n      个规格\n    ")]),t._v(" "),a("popup-picker",{attrs:{title:t.title1,data:t.list1,"show-name":"",columns:1,placeholder:"please select"},on:{"on-change":t.changes},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),a("x-textarea",{attrs:{title:"描述",placeholder:"请填写详细信息","show-counter":!1,rows:3},model:{value:t.formData.dec,callback:function(e){t.$set(t.formData,"dec",e)},expression:"formData.dec"}})],1),t._v(" "),a("div",{staticClass:"picker-buttons"},[a("x-button",{attrs:{type:"primary",disabled:t.uping},nativeOn:{click:function(e){return t.submit_goods(e)}}},[t._v("完成")])],1),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("loading",{attrs:{show:t.uping,text:""}})],1)],1)},staticRenderFns:[]};var v=a("C7Lr")(f,h,!1,function(t){a("UdJP"),a("VLn8")},"data-v-281fc5e3",null);e.default=v.exports}});
//# sourceMappingURL=7.f42ca15e8e65cd775e77.js.map